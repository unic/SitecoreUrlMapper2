---
ID: "549e82c5-424c-486e-ba21-1a1d1deff9a0"
Parent: "30039122-10dd-463b-b184-72220bfb4b0a"
Template: "dd22f1b3-bd87-4db2-9e7d-f7a496888d43"
Path: "/sitecore/system/Modules/UrlMapper2/Script Library/Development/Prepare-DistributionPackage"
DB: master
SharedFields:
- ID: "b1a94ff0-6897-47c0-9c51-aa6acb80b1f0"
  Hint: Script
  Value: |
    # Inspired by https://github.com/SitecorePowerShell/Console/blob/b751ee62351290b955d750c7c71aed6b210d788b/Spe/Data/Unicorn/SPE/Scripts/SPE/SPE/Core/Platform/Development/PowerShell%20Extensions%20Maintena/Prepare%20Console%20Distribution.yml
    
    #TODO during release process: Update the $version variable
    $version = "1.0"
    $currentYear = [datetime]::Today.ToString("yyyy")
        
    $package = New-Package "UrlMapper2"
    $package.Sources.Clear()
    
    $package.Metadata.Author = "David Szöke, Tobias Studer, Christian Hahnloser"
    $package.Metadata.Publisher = "Unic AG"
    $package.Metadata.Version = $version
    
    Get-UnicornConfiguration -Filter "UrlMapper2" | New-UnicornItemSource -Name "UrlMapper2" -Project $package -InstallMode Overwrite
    
    $source = Get-Item "$AppPath\App_Config\Include\UrlMapper2\*.*" |  New-ExplicitFileSource -Name "Configuration Files"
    $package.Sources.Add($source);
    
    $source = Get-Item "$AppPath\bin\Unic.UrlMapper2.dll" | New-ExplicitFileSource -Name "Binaries"
    $package.Sources.Add($source);
    
    $packageName = "$($package.Name)-$Version" -replace " ",".";
    Export-Package -Project $package -Path "$packageName.xml"
    Export-Package -Project $package -Path "$packageName.zip" -Zip
    Download-File "$SitecorePackageFolder\$packageName.zip"
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20200113T064901Z
